{% extends "base.html" %} {% block title %}Home - ObjectDetector AI{% endblock %} {% block content %}
<div class="text-center my-5">
    <h1 class="display-4">Intelligent Image Analysis</h1>
    <p class="lead">Upload an image to detect objects, poses, and emotions with AI.</p>
</div>

<div class="row justify-content-center">
    <div class="col-lg-7">
        <div class="card">
            <div class="card-body">
                <form id="upload-form" method="post" enctype="multipart/form-data" action="/upload">
                    <div id="upload-zone" class="upload-zone mb-4">
                        <div id="upload-instructions">
                            <p>Drag & drop an image here or click to select</p>
                        </div>
                        <div id="image-preview-container" class="d-none" style="position: relative; display: flex; justify-content: center; align-items: center;">
                            <img id="image-preview" src="#" alt="Image Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px;" />
                            <button type="button" id="cancel-image" class="btn-close" aria-label="Close" style="position: absolute; top: 5px; right: 5px; background-color: white; border-radius: 50%;"></button>
                        </div>
                        <input type="file" id="file-input" name="file" accept="image/*" style="display: none;" required>
                    </div>

                    <div class="mb-4">
                        <h5 class="mb-3">Select Analyses:</h5>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" value="true" id="detect-objects" name="detect_objects" checked>
                            <label class="form-check-label" for="detect-objects">
                Object Detection (Fast)
              </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" value="true" id="detect-poses" name="detect_poses">
                            <label class="form-check-label" for="detect-poses">
                Pose Estimation (Slow)
              </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="true" id="detect-emotions" name="detect_emotions">
                            <label class="form-check-label" for="detect-emotions">
                Emotion Detection (Moderate)
              </label>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label for="confidence-threshold" class="form-label">Minimum Confidence (<span id="confidence-value">60</span>%)</label>
                        <input type="range" class="form-range" min="20" max="95" step="5" value="60" id="confidence-threshold" name="confidence_threshold">
                    </div>

                    <div class="mb-3 text-center">
                        <span id="performance-indicator" class="badge rounded-pill text-bg-light">Performance Impact: Low</span>
                    </div>

                    <div class="d-grid">
                        <input type="submit" value="Upload and Analyze" class="btn btn-primary btn-lg">
                    </div>
                </form>
            </div>
        </div>
    </div>

    {% if top_objects %}
    <div class="row justify-content-center mt-5">
        <div class="col-lg-7">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title mb-3">Frequently Detected Objects</h5>
                    <ul class="list-group list-group-flush">
                        {% for obj in top_objects %}
                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: var(--surface-color); color: var(--on-surface-color);">
                            {{ obj._id.capitalize() }}
                            <span class="badge bg-primary rounded-pill">{{ obj.count }}</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    {% endif %} {% endblock %}